class String
  def use_halves
    gsub(/(?<!\d)(0|[1-9]\d*)\.(0|5)-(0|[1-9]\d*)\.(0|5)(?!\d)/) do
      h1 = $2 == "5"
      h2 = $4 == "5"
      z1 = $1 == "0" && h1
      z2 = $3 == "0" && h2
      i1 = z1 ? "" : $1
      i2 = z2 ? "" : $3
      d1 = h1 ? "½" : ""
      d2 = h2 ? "½" : ""
      "#{i1}#{d1}-#{i2}#{d2}"
    end
  end
end
